<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Jupyter Superpower - Extend SQL analysis with Python | mediumnok✊</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Jupyter Superpower - Extend SQL analysis with Python" />
<meta name="author" content="noklam" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Making collboration with Notebook possible and share perfect SQL analysis with Notebook." />
<meta property="og:description" content="Making collboration with Notebook possible and share perfect SQL analysis with Notebook." />
<link rel="canonical" href="https://blog.reviewnb.com/jupyter-sql-notebook/" />
<meta property="og:url" content="https://blog.reviewnb.com/jupyter-sql-notebook/" />
<meta property="og:site_name" content="mediumnok✊" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-06-26T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://blog.reviewnb.com/jupyter-sql-notebook/","@type":"BlogPosting","headline":"Jupyter Superpower - Extend SQL analysis with Python","dateModified":"2021-06-26T00:00:00-05:00","datePublished":"2021-06-26T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.reviewnb.com/jupyter-sql-notebook/"},"author":{"@type":"Person","name":"noklam"},"description":"Making collboration with Notebook possible and share perfect SQL analysis with Notebook.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://noklam.github.io/blog/feed.xml" title="mediumnok✊" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-83544344-5','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">mediumnok✊</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About Me</a><a class="page-link" href="/blog/search/">Search</a><a class="page-link" href="/blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Jupyter Superpower - Extend SQL analysis with Python</h1><p class="page-description">Making collboration with Notebook possible and share perfect SQL analysis with Notebook.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-06-26T00:00:00-05:00" itemprop="datePublished">
        Jun 26, 2021
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">noklam</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      6 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/blog/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blog/categories/#reviewnb">reviewnb</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blog/categories/#sql">sql</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/noklam/blog/tree/master/_notebooks/2021-06-26-Jupyter-SQL-Notebook.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/blog/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/noklam/blog/master?filepath=_notebooks%2F2021-06-26-Jupyter-SQL-Notebook.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/blog/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/noklam/blog/blob/master/_notebooks/2021-06-26-Jupyter-SQL-Notebook.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/blog/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#Notebook-as-a-self-contained-report">Notebook as a self-contained report </a></li>
<li class="toc-entry toc-h2"><a href="#Notebook-as-an-extension-of-IDE">Notebook as an extension of IDE </a></li>
<li class="toc-entry toc-h2"><a href="#Notebook-as-a-collaboration-tool">Notebook as a collaboration tool </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Step-1---Review-PR-online">Step 1 - Review PR online </a></li>
<li class="toc-entry toc-h3"><a href="#Step-2---Review-Changes">Step 2 - Review Changes </a></li>
<li class="toc-entry toc-h3"><a href="#Step-3---Resolve-Discussion">Step 3 - Resolve Discussion </a></li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-06-26-Jupyter-SQL-Notebook.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you have ever written SQL queries to extract data from a database, chances are you are familiar with an IDE like the screenshot below. The IDE offers features like auto-completion, visualize the query output, display the table schema and the ER diagram. Whenever you need to write a query, this is your go-to tool. However, you may want to add <code>Jupyter Notebook</code> into your toolkit. It improves my productivity by complementing some missing features in IDE.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/blog/images/copied_from_nb/images/reviewnb/dbeaver.png" alt="Dbeaver" title="Screenshot of a typical IDE (DBeaver)"></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># !pip install ipython_sql</span>
<span class="o">%</span><span class="k">load_ext</span> sql
<span class="o">%</span><span class="k">config</span> SqlMagic.displaycon = False
<span class="o">%</span><span class="k">config</span> SqlMagic.feedback = False
<span class="c1"># Download the file from https://github.com/cwoodruff/ChinookDatabase/blob/master/Scripts/Chinook_Sqlite.sqlite</span>
<span class="o">%</span><span class="k">sql</span> sqlite:///sales.sqlite.db
    
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">'../_demo/sql_notebook'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

    </details>
</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">sql</span>
select ProductId, Sum(Unit) from Sales group by ProductId;
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<table>
    <tr>
        <th>ProductId</th>
        <th>Sum(Unit)</th>
    </tr>
    <tr>
        <td>1</td>
        <td>210</td>
    </tr>
    <tr>
        <td>2</td>
        <td>50</td>
    </tr>
    <tr>
        <td>3</td>
        <td>30</td>
    </tr>
</table>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Notebook-as-a-self-contained-report">
<a class="anchor" href="#Notebook-as-a-self-contained-report" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notebook as a self-contained report<a class="anchor-link" href="#Notebook-as-a-self-contained-report"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As a data scientist/data analyst, you write SQL queries for ad-hoc analyses all the time. After getting the right data, you make nice-looking charts and put them in a PowerPoint and you are ready to present your findings. Unlike a well-defined ETL job, you are exploring the data and testing your hypotheses all the time. You make assumptions, which is often wrong but you only realized it after a few weeks. But all you got is a CSV that you cannot recall how it was generated in the first place.</p>
<p>Data is not stationary, why should your analysis be? I have seen many screenshots, fragmented scripts flying around in organizations. As a data scientist, I learned that you need to be cautious about what you heard. Don't trust peoples' words easily, verify the result!  To achieve that, we need to know exactly how the data was extracted, what kind of assumptions have been made? Unfortunately, this information usually is not available. As a result, people are redoing the same analysis over and over. You will be surprised that this is very common in organizations. In fact, numbers often do not align because every department has its own definition for a given metric. It is not shared among the organization, and verbal communication is inaccurate and error-prone. It would be really nice if anyone in the organization can reproduce the same result with just a single click. Jupyter Notebook can achieve that reproducibility and keep your entire analysis (documentation, data, and code) in the same place.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Notebook-as-an-extension-of-IDE">
<a class="anchor" href="#Notebook-as-an-extension-of-IDE" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notebook as an extension of IDE<a class="anchor-link" href="#Notebook-as-an-extension-of-IDE"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Writing SQL queries in a notebook gives you extra flexibility of a full programming language alongside SQL.
For example:</p>
<ul>
<li>Write complex processing logic that is not easy in pure SQL</li>
<li>Create visualizations directly from SQL results without exporting to an intermediate CSV</li>
</ul>
<p>For instance, you can pipe your <code>SQL</code> query with <code>pandas</code> and then make a plot. It allows you to generate analysis with richer content. If you find bugs in your code, you can modify the code and re-run the analysis. This reduces the hustles to reproduce an analysis greatly. In contrast, if your analysis is reading data from an anonymous exported CSV, it is almost guaranteed that the definition of the data will be lost. No one will be able to reproduce the dataset.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can make use of the <code>ipython_sql</code> library to make queries in a notebook. To do this, you need to use the <strong>magic</strong> function with the inline magic <code>%</code> or cell magic <code>%%</code>.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sales</span> <span class="o">=</span> <span class="o">%</span><span class="k">sql</span> SELECT * from sales LIMIT 3
<span class="n">sales</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<table>
    <tr>
        <th>ProductId</th>
        <th>Unit</th>
        <th>IsDeleted</th>
    </tr>
    <tr>
        <td>1</td>
        <td>10</td>
        <td>1</td>
    </tr>
    <tr>
        <td>1</td>
        <td>10</td>
        <td>1</td>
    </tr>
    <tr>
        <td>2</td>
        <td>10</td>
        <td>0</td>
    </tr>
</table>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To make it fancier, you can even parameterize your query with variables. Tools like <a href="https://www.bing.com/search?q=github+paramter+notebook&amp;cvid=5b17218ec803438fb1ca41212d53d90a&amp;FORM=ANAB01&amp;PC=U531">papermill</a> allows you to parameterize your notebook. If you execute the notebook regularly with a scheduler, you can get a updated dashboard. To reference the python variable, the <code>$</code> sign is used.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="s2">"sales"</span>
<span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"SELECT * from </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> LIMIT 3"</span>
<span class="n">sales</span> <span class="o">=</span> <span class="o">%</span><span class="k">sql</span> $query
<span class="n">sales</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<table>
    <tr>
        <th>ProductId</th>
        <th>Unit</th>
        <th>IsDeleted</th>
    </tr>
    <tr>
        <td>1</td>
        <td>10</td>
        <td>1</td>
    </tr>
    <tr>
        <td>1</td>
        <td>10</td>
        <td>1</td>
    </tr>
    <tr>
        <td>2</td>
        <td>10</td>
        <td>0</td>
    </tr>
</table>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With a little bit of python code, you can make a nice plot to summarize your finding. You can even make an interactive plot if you want. This is a very powerful way to extend your analysis.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="n">sales</span> <span class="o">=</span> <span class="o">%</span><span class="k">sql</span> SELECT * FROM SALES
<span class="n">sales_df</span> <span class="o">=</span> <span class="n">sales</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">sales_df</span> <span class="o">=</span> <span class="n">sales_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'ProductId'</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">'ProductId'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'Unit'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sales_df</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Sales by ProductId'</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Notebook-as-a-collaboration-tool">
<a class="anchor" href="#Notebook-as-a-collaboration-tool" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notebook as a collaboration tool<a class="anchor-link" href="#Notebook-as-a-collaboration-tool"> </a>
</h2>
<p>Jupyter Notebook is flexible and it fits extremely well with exploratory data analysis. To share to a non-coder, you can share the notebook or export it as an HTML file. They can read the report or any cached executed result. If they need to verify the data or add some extra plots, they can do it easily themselves.</p>
<p>It is true that Jupyter Notebook has an infamous reputation. It is not friendly to version control, it's hard to collaborate with notebooks. Luckily, there are efforts that make collaboration in notebook a lot easier now.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here what I did not show you is that the table has an <code>isDeleted</code> column. Some of the records are invalid and we should exclude them. In reality, this happens frequently when you are dealing with hundreds of tables that you are not familiar with. These tables are made for applications, transactions, and they do not have analytic in mind. Data Analytic is usually an afterthought. Therefore, you need to consult the SME or the maintainer of that tables. It takes many iterations to get the correct data that can be used to produce useful insight.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With <a href="https://www.reviewnb.com/">ReviewNB</a>, you can publish your result and invite some domain expert to review your analysis. This is where notebook shine, this kind of workflow is not possible with just the SQL script or a screenshot of your finding. The notebook itself is a useful documentation and collaboration tool.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-1---Review-PR-online">
<a class="anchor" href="#Step-1---Review-PR-online" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1 - Review PR online<a class="anchor-link" href="#Step-1---Review-PR-online"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/blog/images/copied_from_nb/images/reviewnb/step_1.png" alt="Step1" title="Start a discussion on a cell block, the analyst suggest to add a filter to slice the correct data"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can view your notebook and add comments on a particular cell on <a href="https://www.reviewnb.com/">ReviewNB</a>. This lowers the technical barrier as your analysts do not have to understand Git. He can review changes and make comments on the web without the need to pull code at all. As soon as your analyst makes a suggestion, you can make changes.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-2---Review-Changes">
<a class="anchor" href="#Step-2---Review-Changes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2 - Review Changes<a class="anchor-link" href="#Step-2---Review-Changes"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/blog/images/copied_from_nb/images/reviewnb/step_2.png" alt="Step2" title="Review changes side by side"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Once you have made changes to the notebook, you can review it side by side. This is very trivial to do it in your local machine. Without ReviewNB, you have to pull both notebooks separately. As Git tracks line-level changes, you can't really read the changes as it consists of a lot of confusing noise. It would also be impossible to view changes about the chart with git.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-3---Resolve-Discussion">
<a class="anchor" href="#Step-3---Resolve-Discussion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3 - Resolve Discussion<a class="anchor-link" href="#Step-3---Resolve-Discussion"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/blog/images/copied_from_nb/images/reviewnb/step_3.png" alt="Step3" title="Resolve the discussion."></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Once the changes are reviewed, you can resolve the discussion and share your insight with the team. You can publish the notebook to internal sharing platform like <a href="https://github.com/airbnb/knowledge-repo">knowledge-repo</a> to organize the analysis.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I hope this convince you that Notebook is a good choice for adhoc analytics. It is possible to collaborate with notebook with proper software in place. Regarless if you use notebook or not, you should try your best to document the process. Let's make more reproducible analyses!</p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="noklam/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/blog/python/reviewnb/sql/2021/06/26/Jupyter-SQL-Notebook.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Explaining ideas one post at a time. Make software engineering easy for data scientist.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/noklam" title="noklam"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/noklamchan" title="noklamchan"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a rel="me" href="https://twitter.com/mediumnok" title="mediumnok"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
